var factory;!function(t){var e={exports:{}};t(e),$lf.CaretPos=e.exports}(function(t){"use strict";var e=function(){function t(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}return function(e,n,o){return n&&t(e.prototype,n),o&&t(e,o),e}}(),n=function(){function t(e){!function t(e,n){if(!(e instanceof n))throw TypeError("Cannot call a class as a function")}(this,t),this.target=e,this.isContentEditable=e&&e.contentEditable}return e(t,[{key:"getPos",value:function t(){if(document.activeElement!==this.target)return -1;if(this.isContentEditable){this.target.focus();var e=document.getSelection().getRangeAt(0),n=e.cloneRange();return n.selectNodeContents(this.target),n.setEnd(e.endContainer,e.endOffset),n.toString().length}return this.target.selectionStart}},{key:"setPos",value:function t(e){if(this.isContentEditable){if(e>=0){var n=window.getSelection(),o=this.createRange(this.target,{count:e});o&&(o.collapse(!1),n.removeAllRanges(),n.addRange(o))}}else this.target.setSelectionRange(e,e)}},{key:"createRange",value:function t(e,n,o){if(o||((o=document.createRange()).selectNode(e),o.setStart(e,0)),0===n.count)o.setEnd(e,n.count);else if(e&&n.count>0){if(e.nodeType===Node.TEXT_NODE)e.textContent.length<n.count?n.count-=e.textContent.length:(o.setEnd(e,n.count),n.count=0);else for(var i=0;i<e.childNodes.length&&(o=this.createRange(e.childNodes[i],n,o),0!==n.count);i++);}return o}},]),t}();t.exports=n}),(factory=function(){"use strict";var t,e,n,o,i,r,s,a,c,l,u;l="caret",t=function(){function t(t){this.$inputor=t,this.domInputor=this.$inputor[0]}return t.prototype.setPos=function(t){var e,n,o,i;return(i=c.getSelection())&&(o=0,n=!1,(e=function(t,r){var a,c,l,u,f,h;for(l=0,f=r.childNodes,h=[],u=f.length;l<u&&(a=f[l],!n);l++)if(3===a.nodeType){if(o+a.length>=t){n=!0,(c=s.createRange()).setStart(a,t-o),i.removeAllRanges(),i.addRange(c);break}h.push(o+=a.length)}else h.push(e(t,a));return h})(t,this.domInputor)),this.domInputor},t.prototype.getIEPosition=function(){return this.getPosition()},t.prototype.getPosition=function(){var t,e;return e=this.getOffset(),t=this.$inputor.offset(),e.left-=t.left,e.top-=t.top,e},t.prototype.getPos=function(){var t,e,n;if(n=this.range())return(t=n.cloneRange()).selectNodeContents(this.domInputor),t.setEnd(n.endContainer,n.endOffset),e=t.toString().length,t.detach(),e},t.prototype.getOffset=function(t){var e,n,o,i,r;return c.getSelection&&(o=this.range())&&(o.endOffset-1>0&&o.endContainer!==this.domInputor&&((e=o.cloneRange()).setStart(o.endContainer,o.endOffset-1),e.setEnd(o.endContainer,o.endOffset),n={height:(i=e.getBoundingClientRect()).height,left:i.left+i.width,top:i.top},e.detach()),n&&(null!=n?n.height:void 0)!==0||(e=o.cloneRange(),r=s.createTextNode("|"),e.insertNode(r),e.selectNode(r),n={height:(i=e.getBoundingClientRect()).height,left:i.left,top:i.top},r.remove(),e.detach())),n&&(n.top+=c.scrollY,n.left+=c.scrollX),n},t.prototype.range=function(){var t;return c.getSelection?(t=c.getSelection()).rangeCount>0?t.getRangeAt(0):null:void 0},t}(),e=function(){function t(t){this.$inputor=t,this.domInputor=this.$inputor[0]}return t.prototype.getPos=function(){return this.domInputor.selectionStart},t.prototype.setPos=function(t){var e,n;return e=this.domInputor,s.selection?((n=e.createTextRange()).move("character",t),n.select()):e.setSelectionRange&&e.setSelectionRange(t,t),e},t.prototype.getIEOffset=function(t){var e,n,o,i;return n=this.domInputor.createTextRange(),t||(t=this.getPos()),n.move("character",t),o=n.boundingLeft,{left:o,top:i=n.boundingTop,height:e=n.boundingHeight}},t.prototype.getOffset=function(t){var e,n,o;return(e=this.$inputor,s.selection)?(n=this.getIEOffset(t),n.top+=c.scrollY+e.scrollTop(),n.left+=c.scrollX+e.scrollLeft(),n):(n=e.offset(),o=this.getPosition(t),{left:n.left+o.left-e.scrollLeft(),top:n.top+o.top-e.scrollTop(),height:o.height})},t.prototype.getPosition=function(t){var e,o,i,r,s,a;return e=this.$inputor,i=function(t){return t=t.replace(/<|>|`|"|&/g,"?").replace(/\r\n|\r|\n/g,"<br/>"),/firefox/i.test(navigator.userAgent)&&(t=t.replace(/\s/g,"&nbsp;")),t},void 0===t&&(t=this.getPos()),a=e.val().slice(0,t),o=e.val().slice(t),r=i(a),r+="<span id='caret' style='position: relative; display: inline;'></span>",r+="<span id='caret_h' style='position: relative; display: inline;'>|</span>",r+=i(o),(s=new n(e)).create(r).rect()},t.prototype.getIEPosition=function(t){var e,n,o,i,r;return o=this.getIEOffset(t),n=this.$inputor.offset(),i=o.left-n.left,{left:i,top:r=o.top-n.top,height:e=o.height}},t}(),n=function(){function t(t){this.$inputor=t}return t.prototype.css_attr=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopStyle","borderRightStyle","borderBottomStyle","borderLeftStyle","borderTopWidth","boxSizing","fontFamily","fontSize","fontWeight","height","letterSpacing","lineHeight","marginBottom","marginLeft","marginRight","marginTop","outlineWidth","overflow","overflowX","overflowY","paddingBottom","paddingLeft","paddingRight","paddingTop","textAlign","textOverflow","textTransform","whiteSpace","wordBreak","wordWrap",],t.prototype.mirrorCss=function(){var t;for(let e of(t={position:"absolute",left:-9999,top:0,zIndex:-2e4},"TEXTAREA"==this.$inputor[0].tagName&&this.css_attr.push("width"),this.css_attr))t[e]=this.$inputor.css(e);return t.position="relative",t.display="block",t},t.prototype.create=function(t){return this.$mirror=this.$inputor.afterHTML("<div></div>"),this.$mirror.css(this.mirrorCss()),this.$mirror.html(t),this},t.prototype.rect=function(){var t,e,n;return n={left:(e=(t=this.$mirror.find("#caret")).position()).left,top:e.top,height:this.$mirror.find("#caret_h").height()},this.$mirror.remove(),n},t}(),o={contentEditable:function(t){return!!(t[0].contentEditable&&"true"===t[0].contentEditable)}},r={pos:function(t){return t||0===t?this.setPos(t):this.getPos()},position:function(t){return s.selection?this.getIEPosition(t):this.getPosition(t)},offset:function(t){var e;return this.getOffset(t)}},s=null,c=null,a=null,u=function(t){var e;return(e=null!=t?t.iframe:void 0)?(a=e,c=e.contentWindow,s=e.contentDocument||c.document):(a=void 0,c=window,s=document)},i=function(t){var e;c=(s=t[0].ownerDocument).defaultView||s.parentWindow;try{return a=c.frameElement}catch(n){e=n}};let f=लिपिquery.prototype;f.caret=function(n,i,s){var a;if(r[n])return $lf.isPlainObject(i)?(u(i),i=void 0):u(s),a=o.contentEditable(this)?new t(this):new e(this),r[n].apply(a,[i])},f.caret.EditableCaret=t,f.caret.InputCaret=e,f.caret.Utils=o,f.caret.apis=r})();