class parivartana{constructor(t){this.storage=window.localStorage;let a=this.get_cookie("script");this.script="",this.lang_data="",this.font_size=10,this.sa_lang=-1,this.ready=!1,this.app_lang=""!=t?t:this.get_cookie("app_lang"),this.set_lang(a,!1,!0),this.zero_joiner=akSharAH.Hindi.q.q[0],this.only_web_status=!0,this.back_space=0,this.num=0,this.halant_add_status=!1,this.varna=["","",""],this.varna_sthiti=-1,this.next_chars="",this.d=!1,this.previous_location=1,this.mAtrA_sthiti=!1,this.ignore_status=!1,this.dev_text=[],this.values={auto:"",first:"",second:""},this.madhye=!1,this.daxiNa_parivartan=!1,this.scripts=[this.script,"Normal"],this.current_page="main",this.cuurent_mode="auto",this.captial=[0,"",-1,-1,0,0,!1]}mukhya(t,a){if(null==(a=a.data)||null==a)return mukhya.values.auto=get_value("dynamic"),void mukhya.clear_all_val(!0);a=a.substring(a.length-1),-1!=sarve.indexOf(a)||-1!=sarve.indexOf(to_lower(a))?mukhya.prakriyA(1,a,t):(mukhya.values.auto=get_value("dynamic"),mukhya.clear_all_val(!0))}set_lang_data(t=!1){this.app_lang=get_value("app_lang"),t||this.set_cookie("app_lang",this.app_lang),this.lang_data=lang_texts[this.app_lang],this.lang_data.size>0&&set_font_size(this.font_size+this.lang_data.size)}set_cookie(t,a,e=!1){if(e)switch(t){case"script":this.storage.setItem("script","Hindi");break;case"app_lang":this.storage.setItem("app_lang","en")}else{if(!["app_lang","script"].includes(t))return;switch(t){case"script":if(!lang_list.includes(a))return;break;case"app_lang":if(!["en","hi","sa"].includes(a))return}this.storage.setItem(t,a)}}get_cookie(t){if(t in this.storage){let a=this.storage[t];switch(t){case"script":lang_list.includes(a)||(a="Hindi");break;case"app_lang":["en","hi","sa"].includes(a)||(a="en")}return a}return this.set_cookie(t,"",!0),this.get_cookie(t)}set_lang(t,a=!1,e=!1,i=!1){if(this.akSharANi=akSharAH[t],"Romanized"!=t&&"Normal"!=t&&"Urdu"!=t&&(this.halant=this.akSharANi.q.qq[0]),this.sa_lang=this.akSharANi["く"],a){let t=this.anulekhana(get_value("dynamic"),this.script);0==akSharAH[this.script]["く"]&&1==this.sa_lang&&(this.daxiNa_parivartan=!0),mukhya.prakriyA(5,t)}this.script=t,this.ready&&"auto"==this.cuurent_mode&&set_sa_val(),!e&&i&&this.set_cookie("script",t)}prakriyA(t=0,a="",e=null){let i="",s=0==this.sa_lang&&1==t?0:1;if(this.dev_text=[],0==t?(i=get_value("code"),this.values.manual1=i):1==t||5==t||6==t?i=a:3==t?(i=get_value(a),this.values[a]=i):4==t&&(i=a[0]),null!=i&&null!=i){for(let a=0;a<i.length;a++){let l=i[a];this.dev_text=this.dev_text.join(""),this.dev_text=this.dev_text.split(""),"て"!=l?""==this.next_chars&&l in this.akSharANi?(this.varna[2]="",this.vitaraNa(l,t,s,e)):""==this.next_chars&&is_upper(l)&&to_lower(l)in this.akSharANi?(this.varna[2]="",this.vitaraNa(to_lower(l),t,s,e)):""!=this.next_chars?this.next_chars.includes(l)?(this.d&&(this.halant_add_status=!0,this.d=!1),this.varna[2]=this.varna[1],l=this.varna[0]+l,this.vitaraNa(l,t,s,e)):";"==l?(this.back_space++,this.clear_all_val(!0)):l in this.akSharANi?(this.clear_all_val(),this.varna[2]="",this.vitaraNa(l,t,s,e)):is_upper(l)&&to_lower(l)in this.akSharANi?(this.clear_all_val(),this.vitaraNa(to_lower(l),t,s,e)):(this.dev_text.push(l),this.clear_all_val(!0)):(this.dev_text.push(l),this.clear_all_val(!0)):(l=i[++a],this.dev_text.push(l))}if(this.dev_text=this.dev_text.join(""),0==t)set_value("dev",this.dev_text),this.clear_all_val(!0),this.values.manual2=this.dev_text;else if(5==t)this.daxiNa_parivartan&&(this.dev_text=do_dakShiNa_parivartan(this.dev_text),this.daxiNa_parivartan=!1),set_value("dynamic",this.dev_text),this.clear_all_val(!0),this.values.auto=this.dev_text;else if(1==t)this.values.auto=get_value("dynamic");else if(3==t){let t={first:"second",second:"first"}[a];this.clear_all_val(!0),set_value(t,this.dev_text),this.values[t]=this.dev_text}else if(4==t)this.daxiNa_parivartan&&(this.dev_text=do_dakShiNa_parivartan(this.dev_text),this.daxiNa_parivartan=!1),this.clear_all_val(!0),set_value(a[1],this.dev_text),this.values[a[1]]=this.dev_text;else if(6==t)return this.clear_all_val(!0),this.dev_text}}vitaraNa(t,a,e,i){let s=this.akSharANi[t[0]],l=s[t],h=this.varna_sthiti;if(this.varna_sthiti=l[l.length-1],2==this.captial[0]&&1==a&&(t==this.captial[1]&&time()-this.captial[4]<=2.5&&(t=to_upper(t),l=(s=this.akSharANi[t])[t],h=this.captial[3],this.varna_sthiti=l[l.length-1],this.back_space+=2*this.captial[5],["Brahmi","Modi","Sharada"].includes(this.script)&&(this.back_space++,1==h&&this.back_space++,1==this.sa_lang&&(this.back_space-=2,1!=h&&this.back_space++)),this.captial[6]&&(this.back_space--,1==this.sa_lang&&(1==this.captial[3]&&this.back_space--,1==this.captial[2]&&(this.back_space+=2)),1!=this.captial[3]&&1==this.captial[2]&&this.back_space--),0==this.sa_lang&&1==this.captial[2]&&(this.back_space++,1!=this.captial[3]||this.captial[6]||this.back_space++)),this.captial=[0,"",-1,-1,0,0,!1]),this.mAtrA_sthiti&&[1,2].includes(this.varna_sthiti))return this.clear_all_val(!0),void this.vitaraNa(t[t.length-1],a,e);if(this.varna[0]=t,1==h&&(1!=this.varna_sthiti||this.next_chars.includes(t[t.length-1])||0!=e?0==this.varna_sthiti&&(this.mAtrA_sthiti=!0):this.halant_add_status=!0),this.varna[1]=l[0],1==this.captial[0]&&1==a&&(t==this.captial[1]?this.captial[0]=2:t[t.length-1]==this.captial[1]&&this.akSharANi[to_upper(this.captial[1])][to_upper(this.captial[1])][0]!=this.varna[1]?(this.captial[6]=!0,this.captial[0]=2,this.captial[2]=this.varna_sthiti,this.captial[5]=this.varna[1].length):this.captial=[0,"",-1,-1,0,0]),this.mAtrA_sthiti&&(this.varna[1]=l[1],1==h&&1==e&&(this.back_space+=this.halant.length)),1==h&&2==this.varna_sthiti&&1==t.length&&Object.keys(s).length>1&&0==e)for(x in l[l.length-2]){let a=l[l.length-2][x];if(t+a in s){1==s[t+a][s[t+a].length-1]&&(this.d=!0);break}}1==this.varna_sthiti&&1==e&&(this.varna[1]+=this.halant);let n=this.likha(this.varna[1],this.varna[2],this.back_space,this.halant_add_status);if(0==a||3==a||4==a||5==a||6==a){for(let t=0;t<n[1];t++)this.dev_text.pop();this.dev_text.push(n[0])}else if(1==a){let t=i.value,a=i.selectionStart+1,e=0;this.madhye&&(this.madhye=!1,e=1);let s=t.substring(0,a-n[1]-2-e),l=n[0],h="";t.length+1==a?h=t.substring(a+1):t.length+1!=a&&(h=t.substring(a-1),1==this.varna_sthiti&&(this.madhye=!0,l+=this.zero_joiner));let r=s.length+l.length;i.value=s+l+h,i.focus(),i.selectionStart=r,i.selectionEnd=r,mukhya.values.auto=s+l+h}if(1==t.length&&is_lower(t)&&to_upper(t)in this.akSharANi&&0==this.captial[0]&&1==a&&(this.captial=[1,t,this.varna_sthiti,h,time(),this.varna[1].length,!1]),this.next_chars=l[l.length-2],""!==this.next_chars&&1===a){get_element("suggest").innerHTML=this.next_chars,get_element("suggest").style.display="block";let t=getCursorXY(get_element("dynamic"),get_element("dynamic").selectionStart);get_element("suggest").style.top=(t.y+25).toString()+"px",get_element("suggest").style.left=(t.x+30).toString()+"px",this.num++,setTimeout(function(){1==mukhya.num&&(get_element("suggest").style.display="none"),mukhya.num--},3500)}""==this.next_chars&&this.clear_all_val()}likha(t,a,e,i){a.includes("无")&&((a=a.split(""))[a.indexOf("无")]="",a=a.join(""));let s=0,l="";if(""==a||""==t)l=t,s=a.length;else if(t[0]!=a[0])l=t,s=a.length;else{let e=0;for(let i in a){a[i];if(t.length==e)break;if(t[e]!=a[e])break;e++}l=t.substring(e),s=a.length-e}return s+=e,l.includes("无")?l="":i&&(l=this.halant+l),this.back_space=0,this.halant_add_status=!1,[l,s]}clear_all_val(t){this.next_chars="",this.varna=["","",""],this.mAtrA_sthiti=!1,t&&(this.varna_sthiti=-1,this.captial=[0,"",-1,-1,0,0,!1],this.madhye=!1)}antarparivartan(t,a=!1){let e={lang1:"lang2",lang2:"lang1"}[t],i=[get_value(t),get_value(e)];"Devanagari"==i[0]&&(i[0]="Sanskrit"),"Devanagari"==i[1]&&(i[1]="Sanskrit");let s={lang1:"first",lang2:"second"}[t];if(i[0]!=i[1]||a)if("Normal"==i[0]){let t=this.script;this.set_lang(i[1]),this.prakriyA(3,s),this.set_lang(t)}else{let t={first:"second",second:"first"}[s],a=get_value(s);this.values[s]=a;let e=this.anulekhana(a,i[0]);if("Normal"==i[1])e=replace_all(e,"て",""),set_value(t,e),this.values[t]=e;else{let a=this.script;this.set_lang(i[1]),0==akSharAH[i[0]]["く"]&&1==akSharAH[i[1]]["く"]&&(this.daxiNa_parivartan=!0),this.prakriyA(4,[e,t]),this.set_lang(a)}}else set_value({lang2:"first",lang1:"second"}[t],get_value(s))}anulekhana(t,a){let e=[],i=pratyakSharAH[a],s=-1;t=t.split("");for(let l=0;l<t.length;l++){let h=t[l];("\ud805"==h&&"Modi"==a||"Sharada"==a&&"\ud804"==h||"Brahmi"==a&&"\ud804"==h)&&(h+=t[++l]);let n=i[h];h in i?(e.push(n[0]),s=n[1]):(e.push("て"+h),s=-1)}e=(e=e.join("")).split("");let l=!1;for(let t=0;t<e.length;t++){let i=e[t];l?(i in mAtrA[a]||(e[t]="車"==i?"":"a"+i),l=!1):"无"==i&&(e[t]="",l=!0,t+1==e.length&&(e[t]="a"))}return replace_all(e.join(""),"車","qq")}get_current_mode(){return this.cuurent_mode}set_current_mode(t){this.cuurent_mode=t}}function get_element(t){return document.getElementById(t)}function set_values(t,a){switch(t){case"main":switch(a){case"prayog":set_page("prayog"),set_value("xcv",mukhya.script),get_element("image").src="img\\"+(["Sanskrit","Marathi","Nepali","Konkani"].includes(mukhya.script)?"Hindi":mukhya.script)+".gif",mukhya.clear_all_val(!0);break;case"about":set_page("about"),mukhya.clear_all_val(!0)}break;case"prayog":switch(a){case"main":set_page("main"),change_mode("auto",!0),set_value("dynamic",mukhya.values.auto),set_sa_val();break;case"about":set_page("about")}break;case"about":switch(a){case"main":set_page("main"),change_mode("auto",!0),set_value("main_lang_selector",mukhya.script),set_value("dynamic",mukhya.values.auto),set_sa_val();break;case"prayog":set_page("prayog"),set_value("xcv",mukhya.script),get_element("image").src="img\\"+(["Sanskrit","Marathi","Nepali","Konkani"].includes(mukhya.script)?"Hindi":mukhya.script)+".gif"}break;case"auto":switch(a){case"auto":set_value("main_lang_selector",mukhya.script),set_value("dynamic",mukhya.values.auto),set_sa_val();break;case"inter":""==mukhya.values.first&&""==mukhya.values.second&&(mukhya.scripts=[mukhya.script,"Normal"]),["Hindi","Sanskrit","Marathi","Konkani","Nepali"].includes(mukhya.script)&&(mukhya.scripts[0]="Devanagari"),set_value("lang1",mukhya.scripts[0]),set_value("lang2",mukhya.scripts[1]),set_value("first",mukhya.values.first),set_value("second",mukhya.values.second)}break;case"inter":switch(a){case"auto":set_value("main_lang_selector",mukhya.script),set_value("dynamic",mukhya.values.auto),set_sa_val()}}}let html_data={};function initialize(t){"android"==t&&(get_element("paricaya").innerHTML+="<br>Website : <a>bit.ly/lekhini</a>",get_element("only_web").remove(),get_element("avAharaNam").remove(),mukhya.only_web_status=!1);let a=["xcv","lang1","lang2","main_lang_selector"];for(let t in a){let e="";for(let i in lang_list)"xcv"==a[t]&&"Normal"==lang_list[i]||"Vedic"==lang_list[a]||("Devanagari"!=lang_list[i]||["lang1","lang2"].includes(a[t]))&&(["lang1","lang2"].includes(a[t])&&["Hindi","Sanskrit","Marathi","Konkani","Nepali"].includes(lang_list[i])||(e+=`<option value="${lang_list[i]}" id="${"lang2"==a[t]?"1":""}${lang_list[i]}"></option>`));set_html(a[t],e)}get_element("xcv").innerHTML+="<option id='Vedic' value='Vedic'>वैदिकसंस्कृत</option>",set_html("en","English"),set_html("hin","हिन्दी"),set_html("san","संस्कृतम्"),get_element("main_section").innerHTML+="<div id='suggest'></div>";let e=get_element("suggest").style;e.position="absolute",e.backgroundColor="white",e.padding="1px",e.border="2px solid green",e.fontSize="1.1rem",e.fontWeight="bold",e.display="none",set_html("paricaya","भारते रचितः<br>E-mail : lipilekhika@gmail.com");let i=["main","prayog","auto","about","inter"];for(x in set_html("develop","The Application is under Development. Few parts are still remianing to be made."),i)html_data[i[x]]=get_element(i[x]).innerHTML,get_element(i[x]).remove();get_element("bdy").innerHTML=html_data.main,get_element("mode").innerHTML=html_data.auto,set_font_size(mukhya.font_size),set_value("main_lang_selector",mukhya.script),set_value("app_lang",mukhya.app_lang),mukhya.set_lang_data(!0),set_lang_text(!0),set_sa_val(),mukhya.ready=!0}let mukhya=new parivartana(args);window.onbeforeunload=function(){return"Do you really want to Leave"};