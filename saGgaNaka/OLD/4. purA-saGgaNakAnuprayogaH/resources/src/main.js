class parivartana{constructor(){this.script="Hindi",this.karya=!0,this.akSharANi=LIPI.akSharAH[this.script],this.sa_lang=this.akSharANi["く"],this.time=LIPI.time(),this.zero_joiner=LIPI.akSharAH.Hindi["."][".q"][0],this.back_space=0,this.sahayika_usage=!0,this.halant_add_status=!1,this.varna=["","",""],this.next_chars="",this.d=!1,this.mAtrA_sthiti=!1,this.madhye=!1,this.capital=[0,"",-1,-1,0,0,!1],this.store_last_of_3="",this.last_of_3_status_for_mAtrA=!1,this.special_ved_s=!1,this.usage_table_link=((t=this.script)=>`https://cdn.jsdelivr.net/gh/shubham-anand-gupta/jAlasthAnam@latest/img/lang/${t}.png`),this.pUrva_lekhit=[["",-1],["",-1],["",-1],["",-1],["",-1]],this.second_cap_time=0,this.sahayika=new sahAyikA}set_lang_and_state(t,a=!0){this.script=t,this.karya=a,this.akSharANi=LIPI.akSharAH[this.script],this.sa_lang=this.akSharANi["く"]}mukhya(t,a){if(!this.karya)return;if(null==(a=a.data)||null==a)return void this.clear_all_val(!0);a=a.substring(a.length-1);let i=this.elphased_time()<15;-1!=LIPI.sarve.indexOf(a)||-1!=LIPI.sarve.indexOf(LIPI.to_lower(a))?(i||this.clear_all_val(!0),this.prakriyA(a,1,this.script,this.sa_lang,t)):this.clear_all_val(!0)}elphased_time(){let t=this.time,a=LIPI.time(),i=a-t;return this.time=a,i}prakriyA(t,a,i,s,e=null,h=!1){this.akSharANi=LIPI.akSharAH[i],this.halant=LIPI.includes(["Normal","Romanized","Urdu","Kashmiri"],i)?"":this.akSharANi["."][".x"][0];let l=0==s&&1==a?0:1;if(this.dev_text=[],null==t||null==t)return;if(h=!(0!=a||!h)){let a=t;a=LIPI.replace_all(a,"&nbsp;"," "),a=LIPI.replace_all(a,"&amp;",""),a=LIPI.replace_all(a,"<br>","\n"),a=LIPI.replace_all(a,"<br/>","\n"),t=a=LIPI.replace_all(a,"<br />","\n")}let r=!1,n=!1;for(let s=0;s<t.length;s++){let I=t[s];if("<"==I&&h)r=!0,this.dev_text.push(I),this.clear_all_val(!0);else if(r)">"==I&&(r=!1),this.dev_text.push(I);else if("#"!=I||"^"!=t[s+1]||0!=a||n)if(n){if("^"==I&&"#"==t[s+1]){n=!1,s++;continue}this.dev_text.push(I)}else this.dev_text=this.dev_text.join(""),this.dev_text=this.dev_text.split(""),"て"!=I?""==this.next_chars&&I in this.akSharANi?(this.varna[2]="",this.vitaraNa(I,a,l,e,i)):""==this.next_chars&&LIPI.is_upper(I)&&LIPI.to_lower(I)in this.akSharANi?(this.varna[2]="",this.vitaraNa(LIPI.to_lower(I),a,l,e,i)):""!=this.next_chars?LIPI.includes(this.next_chars,I)?(this.d&&(this.halant_add_status=!0,this.d=!1),this.varna[2]=this.varna[1],I=this.varna[0]+I,this.vitaraNa(I,a,l,e,i)):";"==I||"q"==I?(this.clear_all_val(!0),1==a?this.back_space++:0==a&&"Romanized"==i&&this.dev_text.push(";")):I in this.akSharANi?(this.clear_all_val(),this.varna[2]="",""!=this.store_last_of_3&&0==this.pUrva_lekhit[4][1]&&"Tamil-Extended"==i&&this.clear_all_val(!0),this.vitaraNa(I,a,l,e,i)):LIPI.is_upper(I)&&LIPI.to_lower(I)in this.akSharANi?(this.clear_all_val(),this.vitaraNa(LIPI.to_lower(I),a,l,e,i)):(this.dev_text.push(I),this.clear_all_val(!0)):(this.dev_text.push(I),this.clear_all_val(!0)):(I=t[++s],this.dev_text.push(I),this.clear_all_val(!0));else n=!0,this.clear_all_val(!0),s++}return this.dev_text=this.dev_text.join(""),0==a?this.dev_text:void 0}vitaraNa(t,a,i,s,e){let h=[!1,["",-1]],l=this.akSharANi[t[0]],r=l[t],n=this.pUrva_lekhit[3][1],I=this.pUrva_lekhit[4][1],_=LIPI.last(r);if(2==this.capital[0]&&1==a&&(t==this.capital[1]?LIPI.time()-this.capital[4]<=4?(t=LIPI.to_upper(t),r=(l=this.akSharANi[t])[t],I=this.capital[3],_=LIPI.last(r),this.back_space+=2*this.capital[5],0==_&&LIPI.includes([1,3],this.pUrva_lekhit[2][1])&&(h=[!0,this.pUrva_lekhit[2]]),LIPI.includes(["Brahmi","Modi","Sharada","Siddham","Granth"],e)&&(this.back_space++,1==I&&this.back_space++,1==this.sa_lang&&(this.back_space-=2,1!=I&&this.back_space++)),this.capital[6]&&(this.back_space--,1==this.sa_lang&&(1==this.capital[3]&&this.back_space--,1==this.capital[2]&&(this.back_space+=2)),1!=this.capital[3]&&1==this.capital[2]&&this.back_space--),0==this.sa_lang&&1==this.capital[2]&&(this.back_space++,1!=this.capital[3]||this.capital[6]||this.back_space++),1==i&&3==this.capital[3]&&this.back_space--,this.capital=[3,"",-1,-1,0,0,!1]):this.capital=[2,t,_,this.pUrva_lekhit[3][1],this.second_cap_time,this.capital[5],!1]:this.capital=[0,"",-1,-1,0,0,!1]),this.mAtrA_sthiti&&LIPI.includes([1,2],_))return this.clear_all_val(!0),void this.vitaraNa(LIPI.last(t),a,i,s,e);if(this.varna[0]=t,this.varna[1]=r[0],1!=I&&3!=I||(1!=_||LIPI.includes(this.next_chars,LIPI.last(t))||0!=i?0==_&&(this.mAtrA_sthiti=!0):(this.halant_add_status=!0,3==I&&(this.back_space++,this.varna[1]=this.store_last_of_3+this.varna[1]))),1==this.capital[0]&&1==a&&(t==this.capital[1]?(this.capital[0]=2,this.second_cap_time=LIPI.time()):LIPI.last(t)==this.capital[1]&&this.akSharANi[LIPI.to_upper(this.capital[1])][LIPI.to_upper(this.capital[1])][0]!=this.varna[1]?(this.capital[6]=!0,this.capital[0]=2,this.capital[2]=_,this.capital[5]=this.varna[1].length,this.second_cap_time=LIPI.time()):this.capital=[0,"",-1,-1,0,0]),"LR"!=t&&"r3"!=t||0!=_||(1!=n?this.mAtrA_sthiti=!1:0==i&&this.back_space++,LIPI.includes(["Modi","Sharada"],e)&&this.back_space++),this.mAtrA_sthiti&&(this.varna[1]=r[1],1==I&&1==i&&(this.back_space+=this.halant.length),3==I?(this.back_space++,1==i&&this.back_space++,this.varna[1]+=this.store_last_of_3,this.last_of_3_status_for_mAtrA=!0):0==I&&this.last_of_3_status_for_mAtrA&&(this.varna[1]+=this.store_last_of_3,this.last_of_3_status_for_mAtrA=!0)),"Tamil-Extended"==e&&"M"==t&&((3==n||0==n&&3==this.pUrva_lekhit[2][1])&&0==I||3==this.capital[0]&&(3==this.pUrva_lekhit[1][1]||0==this.pUrva_lekhit[1][1]&&3==this.pUrva_lekhit[0][1])&&0==this.pUrva_lekhit[2][1])&&(this.varna[1]+=this.store_last_of_3,this.back_space++),"Tamil-Extended"==e&&LIPI.includes(["#an","#s"],t)&&("#an"==t&&(3==this.pUrva_lekhit[1][1]||0==this.pUrva_lekhit[1][1]&&3==this.pUrva_lekhit[0][1])&&0==this.pUrva_lekhit[2][1]?(this.varna[1]+=this.store_last_of_3,this.back_space++):"#s"!=t||3!=this.pUrva_lekhit[2][1]&&0!=this.pUrva_lekhit[2][1]&&3!=this.pUrva_lekhit[1][1]||0!=this.pUrva_lekhit[3][1]||(this.varna[1]+=this.store_last_of_3,this.back_space++,this.special_ved_s=!0)),"Tamil-Extended"==e&&LIPI.includes(["#ss","#sss"],t)&&this.special_ved_s&&(this.varna[1]+=this.store_last_of_3),1==I&&2==_&&1==t.length&&Object.keys(l).length>1&&0==i)for(let a of LIPI.last(r,-2))if(t+a in l){1==LIPI.last(l[t+a])&&(this.d=!0);break}(LIPI.includes(e,"Tamil")||"Punjabi"==e)&&LIPI.includes(["R","LR","LRR","RR"],t)&&1==_&&(_=2),1==i&&(1==_?this.varna[1]+=this.halant:3==_&&(this.varna[1]=LIPI.substring(this.varna[1],0,-1)+this.halant+LIPI.last(this.varna[1])));let c=this.likha(this.varna[1],this.varna[2],this.back_space,this.halant_add_status);if(0==a){for(let t=0;t<c[1];t++)this.dev_text.pop();this.dev_text.push(c[0])}else if(1==a){let t=!1;if(LIPI.includes(["input","textarea"],s[0].tagName.toLowerCase())&&(t=!0),t){let t=s.val(),a=s[0].selectionStart+1,i=0;this.madhye&&(this.madhye=!1,i=1);let e=t.substring(0,a-c[1]-2-i),h=c[0],l="";t.length+1==a?l=t.substring(a+1):t.length+1!=a&&(l=t.substring(a-1),1==_&&1==this.sa_lang&&(this.madhye=!0,h+=this.zero_joiner));let r=e.length+h.length;s.val(e+h+l),s.focus(),s[0].selectionStart=r,s[0].selectionEnd=r}else{let t=s.html(),a=new VanillaCaret(s[0]),i=a.getPos()+1,e=!1,h=[],l=0;t=LIPI.replace_all(t,"&nbsp;","<文文文文>"),t=LIPI.replace_all(t,"&amp;","<文文文>");let r=!0,n=0,I=0,p="";for(let a=0;a<t.length;a++){let s=t[a];if("<"==s)e=!0;else if(e&&">"==s){"文"==p&&(l++,r&&n++,I++),e=!1,h.push(s);continue}l>=i-2-c[1]&&l<i-2&&!e?(l++,r&&n++,I++):(l!=i-2||e?h.push(s):(h.push("梵"),r=!1),e||(l++,r&&n++,I++),p=s)}h=h.join(""),h=LIPI.replace_all(h,"<文文文文>","&nbsp;");let o=(h=(h=LIPI.replace_all(h,"<文文文>","&amp;")).split("梵"))[0],d=0;this.madhye&&(this.madhye=!1,o=LIPI.substring(o,0,-1),d=1);let L=c[0],k="";null!=h[1]&&null!=h[1]||(h[1]=""),k=h[1],1==_&&1==this.sa_lang&&I+1!=i&&(this.madhye=!0,L+=this.zero_joiner);let P=o+L+k;s.html(P),a.setPos(n+c[0].length-c[1]-d)}}if(3==this.capital[0]&&(this.capital=[0,"",-1,-1,0,0,!1]),1==t.length&&LIPI.is_lower(t)&&LIPI.to_upper(t)in this.akSharANi&&0==this.capital[0]&&1==a){let a=[0,"",-1,-1,0,0,!1],i=[1,t,_,I,LIPI.time(),this.varna[1].length,!1];t+t in l?this.akSharANi[LIPI.to_upper(t)][LIPI.to_upper(t)][0]!=l[t+t][0]?this.capital=i:this.capital=a:this.capital=i}if(this.next_chars=r[r.length-2],this.sahayika_usage&&1==a){let a={key:[t,this.next_chars],status:[I,_],elm:s,mAtrA:this.mAtrA_sthiti,special_cap:h,lang:e,sa:i};1==this.capital[0]&&(a.cap=!0),this.sahayika.show(a)}3==_&&(this.store_last_of_3=LIPI.last(this.varna[1])),""==this.next_chars&&this.clear_all_val(),this.pUrva_lekhit[0]=this.pUrva_lekhit[1],this.pUrva_lekhit[1]=this.pUrva_lekhit[2],this.pUrva_lekhit[2]=this.pUrva_lekhit[3],this.pUrva_lekhit[3]=this.pUrva_lekhit[4],this.pUrva_lekhit[4]=[t,_]}likha(t,a,i,s){let e=0,h="";if(""==a||""==t)h=t,e=a.length;else if(t[0]!=a[0])h=t,e=a.length;else{let i=0;for(let s in a){a[s];if(t.length==i)break;if(t[i]!=a[i])break;i++}h=t.substring(i),e=a.length-i}return e+=i,s&&(h=this.halant+h),this.back_space=0,this.halant_add_status=!1,[h,e]}clear_all_val(t){this.next_chars="",this.varna=["","",""],this.mAtrA_sthiti=!1,this.last_of_3_status_for_mAtrA=!1,this.special_ved_s=!1,this.back_space=0,t&&(this.pUrva_lekhit=[["",-1],["",-1],["",-1],["",-1],["",-1]],this.store_last_of_3="",this.capital=[0,"",-1,-1,0,0,!1],this.madhye=!1,this.sahayika.pUrvavarNa=[-1,""],this.sahayika.elm.hide())}antarparivartan(t,a,i,s=!1){"Devanagari"==a&&(a="Sanskrit"),"Devanagari"==i&&(i="Sanskrit"),"Kashmiri"==a&&(a="Urdu"),"Kashmiri"==i&&(i="Urdu"),t=this.anulekhana(t,a,s);let e=t=>LIPI.includes(["Romanized","Normal","Tamil","Telugu","Malayalam","Kannada"],t);return e(i)&&!e(a)&&"Tamil-Extended"!=a&&(t=LIPI.replace_all(t,"o","O"),t=LIPI.replace_all(t,"e","E")),t=this.prakriyA(t,0,i,0,null,s)}anulekhana(t,a,i){let s=[],e=LIPI.pratyakSharAH[a];t=t.split("");let h=["","",""],l=LIPI.akSharAH[a],r=["","",""],n=!1,I=!1;for(let _=0;_<t.length;_++){let c=t[_];if("<"==c&&i)n=!0,s.push(c);else if(n)">"==c&&(n=!1),s.push(c);else if("#"!=c||"^"!=t[_+1]||I)if(I){if("^"==c&&"#"==t[_+1]){I=!1,_++,s.push("^#");continue}s.push(c)}else{if(LIPI.includes(["\ud805","\ud804"],c)&&LIPI.includes(["Modi","Sharada","Brahmi","Siddham","Granth"],a)&&(c+=t[++_]),h[1]+c in e&&"百"==LIPI.last(e[h[1]+c])&&""!=h[1]?s[s.length-2]=e[h[1]+c]:h[0]+c in e&&"百"==LIPI.last(e[h[0]+c])&&""!=h[0]?s[s.length-3]=e[h[0]+c]:h[1]+h[2]+c in e&&""!=h[2]&&""!=h[1]?s[s.length-1]=e[h[1]+h[2]+c]:h[2]+c in e&&""!=h[2]?s[s.length-1]=e[h[2]+c]:c in e&&" "!=c?s.push(e[c]):LIPI.includes(["Romanized","Normal"],a)&&LIPI.includes(LIPI.pUrNasarve.split(""),c)||LIPI.includes("\n; .'#$1234567890".split(""),c)?s.push(c):s.push("て"+c),h[0]=h[1],h[1]=h[2],h[2]=c,!LIPI.is_null(l[r[2]])){let t=l[r[2]];if(!LIPI.is_null(t[r[2]+LIPI.last(s)])){t[r[2]+LIPI.last(s)][0]!=h[2]+c&&(s[s.length-1]=";"+s[s.length-1])}}r[0]=r[1],r[1]=r[2],r[2]=LIPI.last(s)}else I=!0,_++,s.push("#^")}function _(t,a=0){return null==t||null==t?[{},"",[]][a]:t}if(s=s.join(""),"Normal"!=a){for(let t of["A","i","I","u","U","e","E","o","O","ai","au","R","RR","LR","LRR"])s=LIPI.replace_all(s,"此."+t,t),s=LIPI.replace_all(s,"百."+t,t);r=["","",""];let t=[];for(let a=0;a<s.length;a++){let i=s[a];"基"==r[2]&&("此"==r[1]||"百"==r[1])&&""!=i&&r[0]+i in _(l[r[0]])?t.push(";"+i):t.push(i),r[0]=r[1],r[1]=r[2],r[2]=i}s=t.join("");for(let t of["a","i","u"])s=LIPI.replace_all(s,"此"+t,"a;"+t),s=LIPI.replace_all(s,"百"+t,"a;"+t);s=LIPI.replace_all(s,"此基",""),s=LIPI.replace_all(s,"百基",""),s=LIPI.replace_all(s,"此","a"),s=LIPI.replace_all(s,"百","a"),s=LIPI.replace_all(s,"基",".x")}return s}}jQuery.fn.lipi_lekhika_add=function(t=!1){t?(this.attr("oninput","LipiLekhikā.mukhya($(this), event);"),this.attr("onkeydown","LIPI.clear(event);")):(this.on("input",function(){LipiLekhikā.mukhya($(this),event)}),this.on("keydown",function(){LIPI.clear(event)}))};class sahAyikA{constructor(t="English"){this.c=0,this.d=0,this.f_count=12,this.reset_capital_status=!1,this.pUrvavarNa=[["","",-1],""],this.added_fonts=[],this.closed=!0,this.elm=jQuery("<span>",{id:LIPI.names.main}).appendTo("body"),this.elm.css({position:"absolute","background-color":"white",padding:"1.5px",border:"1px solid black","font-weight":"bold",display:"none","z-index":"10000","font-family":'"Calibri","Nirmala UI","LipiFont1","LipiFont2","LipiFont3","LipiFont4","LipiFont5"'});let a="",i="";i+="<td></td>",a+='<td><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsSAAALEgHS3X78AAAAB3RJTUUH5QMRBTcSQC15LAAABGRJREFUOMt11G1o1WUYx/Hv/b/v///snM3p3JxuVnOazaFM3HwYlKRihEUP2DJJ0xEVSBYI2QtB9JWRL1ToAQwakmgUYVQrk8TUyFlhmiU+NTc0nds5Ow/beT7/c1+9MJ2SXq/uF9f1gZvr4qe4raQcGAK7ytRLg1lqy9ynrDXTJW3GSkIjUScqYfWXGix26kh2X+BcvEc8Bydvbxnq5sOuVnBFSmWZWSGT9RviuY02Y7SNayRmkJjBxgwS1ZBSRZX2z+po7j23O7HHlrqpQPfQCCjrgatUyiq1Rabqdikaj5gDMU0x5lKMukjcYKMGiWlU9r/Bgs07g/ldunt4g4T0YMnZOEaWgxyiVG3lHTWbV6SAykZL6MtVk0qXUkGKcToBIiiEjPHo9WopWgflifeA1//qGFDeqcF1+bqylOFTUJ/RTgurCYkKR6rYsGsNvx6YTC7tUlmZ5OWFR1geOozBclmPZ83JdhLRAN5Y2NG8Rz1cmVydb6z4I7y19QO9OcZDPMs2aplAESTn8HdfHTPre1nYfIbrkbF8dXQ2rdMucV8hQl9uHHtPz6O14TIr6rto0j2UktWinfrRHed+MMzneWppuLmjUifN24t348QVKgYNlddo37KWS0MTmGfO32hzFM2jenlRHyaf1wgKQqahOC7YZpjEEwRxRm4HsELeegxJOUcvzsDzfOrKwkgGFHLjKkThi3MDA0Qrx5a5TxoqaESBoMgTwFU+eTy2Hl7Jof0z6L40nvbnumgZdQE/b+hTleR9zd1KPKfREGAMQOepBRzums2mpR/hImRyARyEYKjAiTN1bIksI5Yo4+eLD5KOapRzF9BRYwyCBfRwIsSXO+fydMtPPFr5Oxsf30VubpCuS028tX0lZ7trmD7xGrMa+ognJiP2/6AC65CmH2DhnN+YOGmQjr1LSEopQclSbodZUHWSqVMGaJr0Dx3zP+T1mu8IGP+uX8aXfocwJ7BQExrgtTe/5ciB6ez4+gUiMpaCcfkzPYXeq1VMHB1lVCEFxbtbCKhc8YThAvuYwWOMoaRt/kF61k3k4+2LOfj9TKorEpy/UIvFoW36cXT6Xhoo32adofw+wxd00sxLzGRRUGVYv3Q3TbU9fNPZSuR6OY+0XKBtWhdzC+ewKXVP0EkWjrlXkp2GbUQ4yFaqaaJaVZWQ45nGH1lSc5x8tAQ3bnEi4Ec9QCEKfBysGsFVxo/ocPbdbHNVRG/qAjroUXNIUaXmi3ECktaolEKnLaQVNqsh40BWkfWDhENVzB7dwxTbBzk7bPqzG4O/DHyuI1lRAHYxqKMY2alWy0y9SYLmfjtskKjBxjQSvZmHGht3KRYMTtGik4UrOpzZHDzW/4k/IeS719O3BWw9qB6UbNCz7AyzVsrNEls01ZI0jo2PgDKorUrIgEr6+3U4837JqcGTtswVnSzcmdi34FYNA9azi70mO94sEm1aJGdqZEgjUdVHhBOq3z/k9g6flpDJu9fTd8z/C1+OA8msQQ0YAAAAIXRFWHRDcmVhdGlvbiBUaW1lADIwMjA6MDg6MjcgMTA6MDk6MTFaEhWTAAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDIxLTAzLTE3VDA1OjU1OjE4KzAwOjAwt6ktQQAAACV0RVh0ZGF0ZTptb2RpZnkAMjAyMS0wMy0xN1QwNTo1NToxOCswMDowMMb0lf0AAAAASUVORK5CYII="></td>',a+=`<td id="${LIPI.names.key1}"></td>`,i+=`<td id="${LIPI.names.key0}"></td>`,a+="<td> &nbsp;</td>",i+="<td> &nbsp;</td>";for(let t=0;t<60;t++)a+=`<td id="${LIPI.names.varna_id}${t}" class="${LIPI.names.varna_class}"></td>`,i+=`<td id="${LIPI.names.next_id}${t}" class="${LIPI.names.next_class}"></td>`;let s=`<table><tr>${i}</tr><tr>${a}</tr></table><div id="${LIPI.names.sahAyatA}" style="font-size: 10.5px;color: purple;"></div>`;this.elm.html(s),$("#"+LIPI.names.key0).css({color:"brown","font-size":"20px","text-align":"center"}),$("#"+LIPI.names.key1).css({color:"red","font-size":"15px","text-align":"center"}),$("."+LIPI.names.varna_class).css({color:"green","font-size":"18px","text-align":"center"}),$("."+LIPI.names.next_class).css({color:"black","font-size":"18px","text-align":"center"});for(let t=this.f_count+1;t<60;t++)$(`#${LIPI.names.varna_id}${t}`).hide(),$(`#${LIPI.names.next_id}${t}`).hide();this.set_lang(t)}hide(t=!1){t?LipiLekhikā.sahayika.closed&&(LipiLekhikā.sahayika.reset(),LipiLekhikā.sahayika.closed=!0):(1!=LipiLekhikā.sahayika.c||LipiLekhikā.sahayika.closed||(LipiLekhikā.sahayika.reset(),LipiLekhikā.sahayika.closed=!0),LipiLekhikā.sahayika.c--)}reset(){if(LipiLekhikā.sahayika.elm.hide(),this.f_count>12){for(let t=13;t<=this.f_count;t++)$(`#${LIPI.names.varna_id}${t}`).hide(),$(`#${LIPI.names.next_id}${t}`).hide();this.f_count=12}for(let t=0;t<60;t++)LIPI.set_html(`${LIPI.names.next_id}${t}`,""),LIPI.set_html(`${LIPI.names.varna_id}${t}`,"")}show(t){if(this.reset_capital_status=!1,this.f_count>12){for(let t=13;t<=this.f_count;t++)$(`#${LIPI.names.varna_id}${t}`).hide(),$(`#${LIPI.names.next_id}${t}`).hide();this.f_count=12}let a=t.key[1],i=t.key[0],s=t.mAtrA,e=t.special_cap,h=t.lang,l=t.sa;e[0]&&(this.pUrvavarNa=[[LIPI.akSharAH[h][e[1][0]][e[1][0]][0],"",e[1][1]],e[1][0]]);let r=t.elm.caret("offset"),n=r.top,I=r.height,_=r.left;this.elm[0].style.top=`${n+I}px`,this.elm[0].style.left=`${_+8}px`;let c=["",!1];LIPI.includes(["Urdu","Romanized","Normal","Kashmiri"],LipiLekhikā.script)||(c=[LIPI.akSharAH[h]["."][".x"][0],1==l]);let p=new Map,o=LIPI.akSharAH[h][i[0]],d=0;for(let t of a)if(i+t in o){p.set(t,o[i+t]);for(let a of LIPI.last(o[i+t],-2))i+t+a in o&&(p.set(t+a,o[i+t+a]),d++);d++}let L=0,k=[0,0];if("cap"in t){k[0]=d;let t=LIPI.to_upper(i),a=LIPI.akSharAH[h][t];p.set(i+i,a[t]);let s=LIPI.last(p.get(i+i),-2);for(let e of s)if(t+e in a){p.set(i+i+e,a[t+e]);for(let s of LIPI.last(a[t+e],-2))t+e+s in a&&(p.set(i+i+e+s,a[t+e+s]),d++);d++}k[1]=d+1}if((LIPI.includes([1,3],LIPI.last(this.pUrvavarNa[0]))||s)&&0==LIPI.last(o[i])){let t=this.pUrvavarNa[0][0]+o[i][1];3==LIPI.last(this.pUrvavarNa[0])&&"a"!=i?t=LIPI.substring(t,0,-2)+LIPI.last(t)+LIPI.last(t,-2):3==LIPI.last(this.pUrvavarNa[0])&&"a"==i&&(t=LIPI.last(t,0,-1)+LIPI.last(t)),LIPI.set_html(LIPI.names.key0,this.pUrvavarNa[1]+i),LIPI.set_html(LIPI.names.key1,t)}else{LIPI.set_html(LIPI.names.key0,i);let t=o[i][0]+(LIPI.includes([1,3],LIPI.last(o[i]))?c[0]:"");3==LIPI.last(o[i])&&(t=LIPI.substring(t,0,-2)+LIPI.last(t)+LIPI.last(t,-2)),LIPI.set_html(LIPI.names.key1,t)}for(let t of p.keys()){LIPI.set_html(`${LIPI.names.next_id}${L}`,t);let a=p.get(t)[0];0==LIPI.last(p.get(t))&&LIPI.includes([1,3],LIPI.last(this.pUrvavarNa[0]))&&(a=p.get(t)[1]),LIPI.includes([1,3],LIPI.last(p.get(t)))&&c[1]&&(a+=c[0],3==LIPI.last(p.get(t))&&(a=LIPI.substring(a,0,-2)+LIPI.last(a)+LIPI.last(a,-2))),(LIPI.includes([1,3],LIPI.last(this.pUrvavarNa[0]))||s)&&0==LIPI.last(p.get(t))&&(a=this.pUrvavarNa[0][0]+a,3==LIPI.last(this.pUrvavarNa[0])&&(a=LIPI.substring(a,0,-2)+LIPI.last(a)+LIPI.last(a,-2))),LIPI.set_html(`${LIPI.names.varna_id}${L}`,a),L++}let P=0;for(let t of p.keys())P++;if(P-1>this.f_count+1){for(let t=this.f_count+1;t<P;t++)$(`#${LIPI.names.varna_id}${t}`).show(),$(`#${LIPI.names.next_id}${t}`).show();this.f_count=P-1}for(let t=L;t<13;t++)LIPI.set_html(`${LIPI.names.varna_id}${t}`,""),LIPI.set_html(`${LIPI.names.next_id}${t}`,"");this.c++,s||(this.pUrvavarNa=[o[i],i]),this.closed&&(this.closed=!1),this.elm.show(),"cap"in t&&(this.d++,this.reset_capital_status=!0,setTimeout(function(){!function(t){if(LipiLekhikā.sahayika.d--,LipiLekhikā.sahayika.reset_capital_status){if(0==LipiLekhikā.sahayika.d)for(let a=t[0];a<t[1];a++)LIPI.set_html(`${LIPI.names.next_id}${a}`,""),LIPI.set_html(`${LIPI.names.varna_id}${a}`,"");LipiLekhikā.capital=[0,"",-1,-1,0,0,!1]}}(k)},4e3));let u=this.hide;setTimeout(function(){u()},15e3)}set_lang(t){LIPI.set_html(LIPI.names.sahAyatA,LIPI.texts[t])}add_font(t){if(!LIPI.includes(["Sharada","Modi","Brahmi","Siddham","Granth"],t)||LIPI.includes(this.added_fonts,t))return;let a="https://cdn.jsdelivr.net/gh/shubham-anand-gupta/jAlasthAnam@latest";new FontFace({Sharada:"LipiFont1",Modi:"LipiFont2",Brahmi:"LipiFont3",Siddham:"LipiFont4",Granth:"LipiFont5"}[t],{Sharada:`url(${a}/src/fonts/sharada.ttf)`,Modi:`url(${a}/src/fonts/modi.ttf)`,Brahmi:`url(${a}/src/fonts/brahmi.ttf)`,Siddham:`url(${a}/src/fonts/siddham.ttf)`,Granth:`url(${a}/src/fonts/granth.ttf)`}[t]).load().then(function(t){document.fonts.add(t)}).catch(function(t){}),this.added_fonts.push(t)}}let LipiLekhikā=new parivartana;